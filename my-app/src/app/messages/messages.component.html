<!--
<div id="messages" >
    <h3>messages</h3>
    <aside>
    <div>
        <ul>
            @for (item of messages; track item.id) {
                <li style="display: block; margin-bottom: 1px;">
                    <h2>
                        {{item.body}}
                    </h2>
                </li>
            }
        </ul>
    </div>
</aside>
</div>
-->
<!-- Google Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@300;400;500;600;700&display=swap" rel="stylesheet">

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css">

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
  integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
  integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>

<!-- char-area -->
<div class="row " *ngIf="messages?.length">
  <div class="col-12">
    <div class="chat-area">

      <!-- chatbox -->
      <div class="chatbox">
        <div class="modal-dialog-scrollable">
          <div class="modal-content">
            <div class="modal-body" style="background-color: rgba(255, 251, 215, 0.336);">
              <div class="msg-body">
                <ul>
                  <div *ngFor="let message of messages">
                    <div *ngIf="message.author != authorMessage; else elseBlock">
                      <li class="sender">
                        <span class="author-left">{{message.author}}
                          <button type="button" class="btn btn-outline-warning btn-sm"
                            (click)="reply(message.id)">Reply</button></span>
                        <p *ngIf="message.parentMessageId">
                          <span>
                            <p class="" style="background-color: aliceblue; font-size: 15px;">
                              <span style="font-weight: bold; font-size: 15px;"> {{ getMessageById(message.parentMessageId)?.author
                              }}</span>
                              <br>
                              {{ getMessageById(message.parentMessageId)?.body }}
                            </p>
                          </span>
                        </p>
                        <br>
                        <p>{{message.body}} </p>
                        <span class="time">{{ message.date | date:'short' }}</span>
                        <div *ngIf="message.attachment">
                          <a href="{{ message.attachment.url }}" download="{{ message.attachment.name }}">Attachment</a>
                        </div>
                      </li>
                    </div>
                    <ng-template #elseBlock>
                      <li class="repaly">

                        <span class="author-right">{{message.author}}
                          <button type="button" class="btn btn-outline-warning btn-sm"
                            (click)="updateMessage(message.id)">Modify</button></span>
                            <p *ngIf="message.parentMessageId">
                              <span>
                                <p class="" style="background-color: rgb(255, 255, 232); font-size: 15px;">
                                  <span style="font-weight: bold; font-size: 15px;"> {{ getMessageById(message.parentMessageId)?.author
                                  }}</span>
                                  <br>
                                  {{ getMessageById(message.parentMessageId)?.body }}
                                </p>
                              </span>
                            </p>
                            <br>
                            <p>{{message.body}} </p>
                        <div *ngIf="message.attachment" class="attached">
                          <a href="{{ message.attachment.url }}" download="{{ message.attachment.name }}">
                            Attachment</a>
                        </div>
                        <span class="time">{{ message.date | date:'short' }}</span>

                      </li>
                    </ng-template>
                  </div>
                </ul>

              </div>
            </div>

          </div>

        </div>
      </div>
    </div>
    <!-- chatbox -->

  </div>
  <!-- char-area -->
  <app-message-input (messageSent)="onSubmit($event)"></app-message-input>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>